<section class="profile-hero">
  <div class="profile-background-container">

    <% if @user.background.attached? %>
      <%= image_tag @user.background.variant(:profile_background), class: "profile-image" %>
    <% else %>
      <%= image_tag "default_background.jpg", class: "profile-image" %>
    <% end %>

    <div class="profile-avatar-container">
      <% if @user.avatar.attached? %>
        <%= image_tag @user.avatar.variant(:medium), class: "profile-image"%>
      <% else %>
        <%= image_tag "default_avatar.jpg", size: "300x300", class: "profile-image" %>
      <% end %>
    </div>

    <% if current_user == @user %>
      <a href="<%= follows_path %>" class="follows-link">
        <%= inline_svg_tag "bear-trap-svgrepo-com.svg", class: "notification-icon" %>
      </a>
    <% end %>

  </div>
</section>

<section id="user_info">
  <div class="flex-container wrap">

    <div class="card flex-container wrap" style="align-items: center;">
      <p class="title"><%= @user.first_name + " " + @user.last_name %></p>
      <p><%= @user.email %></p>
      <p>Followers: <%= @user.passive_follows.where(accepted: true).length %> Following: <%= @user.active_follows.where(accepted: true).length %></p>

      <% if @user == current_user %>
        <%= link_to "Edit Profile", edit_profile_path %>
      <% else %>

        <% if current_user.following?(@user) %>
          <%= button_to "Release 'em!", unfollow_path(@user), method: :delete, class: "btn blue" %>
        <% else %>
          <%= button_to "Trap 'em!", follow_path(@user), class: "btn submit" %>
        <% end %>

      <% end %>
    </div>

  </div>
</section>

<section id="user_posts">
  <%= render "shared/posts", posts: @user.posts.order(created_at: :desc), new_comment: @new_comment %>
</section>
